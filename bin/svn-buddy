#!/usr/bin/env php
<?php
/**
 * This file is part of the SVN-Buddy library.
 * For the full copyright and license information, please view
 * the LICENSE file that was distributed with this source code.
 *
 * @copyright Alexander Obuhovich <aik.bold@gmail.com>
 * @link      https://github.com/console-helpers/svn-buddy
 */

class DetectAutoloader
{

	/**
	 * Detects autoloader.
	 *
	 * @return void
	 */
	public static function detect()
	{
		$autoloaded = false;
		$autoload_locations = array(
			// When executed directly.
			__DIR__ . '/../vendor/autoload.php',

			// When executed from PHAR.
			__DIR__ . '/../../../autoload.php',
		);

		foreach ( $autoload_locations as $autoload_location ) {
			if ( file_exists($autoload_location) ) {
				$autoloaded = true;
				require_once $autoload_location;
				break;
			}
		}

		if ( !$autoloaded ) {
		    throw new \RunTimeException('Cannot find an autoload.php file, have you executed composer install command?');
		}
	}

}

DetectAutoloader::detect();

$container = new \ConsoleHelpers\SVNBuddy\DIContainer();
$app = new \ConsoleHelpers\SVNBuddy\Application($container);
$app->run($container['input'], $container['output']);
